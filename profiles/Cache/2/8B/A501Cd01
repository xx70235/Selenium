(function(t,e){if(!e.addEventListener){t.Popcorn={isSupported:false};var n=("forEach extend effects error guid sizeOf isArray nop position disable enable destroy "+"addTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId "+"timeUpdate plugin removePlugin compose effect parser xhr getJSONP getScript").split(/\s+/);while(n.length){t.Popcorn[n.shift()]=function(){}}return}var a=Array.prototype,i=Object.prototype,r=a.forEach,s=a.slice,o=i.hasOwnProperty,d=i.toString,u=t.Popcorn,c=/^(#([\w\-\_\.]+))$/,f=[],l=false,p=false,v={events:{hash:{},apis:{}}},h=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e,n){t.setTimeout(e,16)}}(),m=function(t){var e=t.media.currentTime,n=t.options.frameAnimation,a=t.data.disabled,i=t.data.trackEvents,r=i.animating,s=i.startIndex,o=g.registryByName,d=0,u,c,f;s=Math.min(s+1,i.byStart.length-2);while(s>0&&i.byStart[s]){u=i.byStart[s];c=u._natives;f=c&&c.type;if(!c||!!o[f]||!!t[f]){if(u.start<=e&&u.end>e&&a.indexOf(f)===-1){if(!u._running){u._running=true;c.start.call(t,null,u);if(n&&u&&u._running&&u.natives.frame){c.frame.call(t,null,u,e)}}}else if(u._running===true){u._running=false;c.end.call(t,null,u);if(n&&u._natives.frame){d=r.indexOf(u);if(d>=0){r.splice(d,1)}}}}s--}},g=function(t,e){return new g.p.init(t,e||null)};g.version="@VERSION";g.isSupported=true;g.instances=[];g.p=g.prototype={init:function(n,a){var i;if(typeof n==="function"){if(e.readyState==="interactive"||e.readyState==="complete"){n(e,g);return}f.push(n);if(!l){l=true;var r=function(){p=true;e.removeEventListener("DOMContentLoaded",r,false);for(var t=0,n=f.length;t<n;t++){f[t].call(e,g)}f=null};e.addEventListener("DOMContentLoaded",r,false)}return}i=c.exec(n);this.media=i&&i.length&&i[2]?e.getElementById(i[2]):n;this[this.media.nodeName&&this.media.nodeName.toLowerCase()||"video"]=this.media;g.instances.push(this);this.options=a||{};this.isDestroyed=false;this.data={timeUpdate:g.nop,disabled:[],events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}};var s=function(e){var n,a;if(e.media.readyState>=2){n=e.media.duration;a=n!=n?Number.MAX_VALUE:n+1;g.addTrackEvent(e,{start:a,end:a});if(e.options.frameAnimation){e.data.timeUpdate=function(){g.timeUpdate(e,{});e.trigger("timeupdate");!e.isDestroyed&&h(e.data.timeUpdate)};!e.isDestroyed&&h(e.data.timeUpdate)}else{e.data.timeUpdate=function(t){g.timeUpdate(e,t)};if(!e.isDestroyed){e.media.addEventListener("timeupdate",e.data.timeUpdate,false)}}}else{t.setTimeout(function(){s(e)},1)}};s(this);return this}};g.p.init.prototype=g.p;g.forEach=function(t,e,n){if(!t||!e){return{}}n=n||this;var a,i;if(r&&t.forEach===r){return t.forEach(e,n)}if(d.call(t)==="[object NodeList]"){for(a=0,i=t.length;a<i;a++){e.call(n,t[a],a,t)}return t}for(a in t){if(o.call(t,a)){e.call(n,t[a],a,t)}}return t};g.extend=function(t){var e=t,n=s.call(arguments,1);g.forEach(n,function(t){for(var n in t){e[n]=t[n]}});return e};g.extend(g,{noConflict:function(e){if(e){t.Popcorn=u}return g},error:function(t){throw new Error(t)},guid:function(t){g.guid.counter++;return(t?t:"")+(+new Date+g.guid.counter)},sizeOf:function(t){var e=0;for(var n in t){e++}return e},isArray:Array.isArray||function(t){return d.call(t)==="[object Array]"},nop:function(){},position:function(n){var a=n.getBoundingClientRect(),i={},r=n.ownerDocument,s=e.documentElement,o=e.body,d,u,c,f,l,p;d=s.clientTop||o.clientTop||0;u=s.clientLeft||o.clientLeft||0;c=t.pageYOffset&&s.scrollTop||o.scrollTop;f=t.pageXOffset&&s.scrollLeft||o.scrollLeft;l=Math.ceil(a.top+c-d);p=Math.ceil(a.left+f-u);for(var v in a){i[v]=Math.round(a[v])}return g.extend({},i,{top:l,left:p})},disable:function(t,e){var n=t.data.disabled;if(n.indexOf(e)===-1){n.push(e)}m(t);return t},enable:function(t,e){var n=t.data.disabled,a=n.indexOf(e);if(a>-1){n.splice(a,1)}m(t);return t},destroy:function(t){var e=t.data.events,n,a,i;for(a in e){n=e[a];for(i in n){delete n[i]}e[a]=null}if(!t.isDestroyed){t.data.timeUpdate&&t.media.removeEventListener("timeupdate",t.data.timeUpdate,false);t.isDestroyed=true}}});g.guid.counter=1;g.extend(g.p,function(){var t="load play pause currentTime playbackRate volume duration preload playbackRate "+"autoplay loop controls muted buffered readyState seeking paused played seekable ended",e={};g.forEach(t.split(/\s+/g),function(t){e[t]=function(e){if(typeof this.media[t]==="function"){if(e!=null&&/play|pause/.test(t)){this.media.currentTime=g.util.toSeconds(e)}this.media[t]();return this}if(e!=null){this.media[t]=e;return this}return this.media[t]}});return e}());g.forEach("enable disable".split(" "),function(t){g.p[t]=function(e){return g[t](this,e)}});g.extend(g.p,{roundTime:function(){return-~this.media.currentTime},exec:function(t,e){g.addTrackEvent(this,{start:t,end:t+1,_running:false,_natives:{start:e||g.nop,end:g.nop,type:"exec"}});return this},mute:function(t){var e=t==null||t===true?"muted":"unmuted";if(e==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(e==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.trigger(e);return this},unmute:function(t){return this.mute(t==null?false:!t)},position:function(){return g.position(this.media)},toggle:function(t){return g[this.data.disabled.indexOf(t)>-1?"enable":"disable"](this,t)},defaults:function(t,e){if(g.isArray(t)){g.forEach(t,function(t){for(var e in t){this.defaults(e,t[e])}},this);return this}if(!this.options.defaults){this.options.defaults={}}if(!this.options.defaults[t]){this.options.defaults[t]={}}g.extend(this.options.defaults[t],e);return this}});g.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause "+"loadedmetadata loadeddata waiting playing canplay canplaythrough "+"seeking seeked timeupdate ended ratechange durationchange volumechange"};g.Events.Natives=g.Events.UIEvents+" "+g.Events.MouseEvents+" "+g.Events.Events;v.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(t,e){var n=v.events.apiTypes,a=t.Natives.split(/\s+/g),i=0,r=a.length,s;for(;i<r;i++){e.hash[a[i]]=true}n.forEach(function(n,a){e.apis[n]={};var i=t[n].split(/\s+/g),r=i.length,s=0;for(;s<r;s++){e.apis[n][i[s]]=true}})})(g.Events,v.events);g.events={isNative:function(t){return!!v.events.hash[t]},getInterface:function(t){if(!g.events.isNative(t)){return false}var e=v.events,n=e.apiTypes,a=e.apis,i=0,r=n.length,s,o;for(;i<r;i++){o=n[i];if(a[o][t]){s=o;break}}return s},all:g.Events.Natives.split(/\s+/g),fn:{trigger:function(n,a){var i,r;if(this.data.events[n]&&g.sizeOf(this.data.events[n])){i=g.events.getInterface(n);if(i){r=e.createEvent(i);r.initEvent(n,true,true,t,1);this.media.dispatchEvent(r);return this}g.forEach(this.data.events[n],function(t,e){t.call(this,a)},this)}return this},listen:function(t,e){var n=this,a=true,i=g.events.hooks[t],r=t,s;if(!this.data.events[t]){this.data.events[t]={};a=false}if(i){if(i.add){i.add.call(this,{},e)}if(i.bind){t=i.bind}if(i.handler){s=e;e=function o(t){i.handler.call(n,t,s)}}a=true;if(!this.data.events[t]){this.data.events[t]={};a=false}}this.data.events[t][e.name||e.toString()+g.guid()]=e;if(!a&&g.events.all.indexOf(t)>-1){this.media.addEventListener(t,function(e){g.forEach(n.data.events[t],function(t,a){if(typeof t==="function"){t.call(n,e)}})},false)}return this},unlisten:function(t,e){if(this.data.events[t]&&this.data.events[t][e]){delete this.data.events[t][e];return this}this.data.events[t]=null;return this}},hooks:{canplayall:{bind:"canplaythrough",add:function(t,e){var n=false;if(this.media.readyState){e.call(this,t);n=true}this.data.hooks.canplayall={fired:n}},handler:function y(t,e){if(!this.data.hooks.canplayall.fired){e.call(this,t);this.data.hooks.canplayall.fired=true}}}}};g.forEach(["trigger","listen","unlisten"],function(t){g.p[t]=g.events.fn[t]});g.addTrackEvent=function(t,e){if(e&&e._natives&&e._natives.type&&t.options.defaults&&t.options.defaults[e._natives.type]){e=g.extend({},t.options.defaults[e._natives.type],e)}if(e._natives){e._id=!e.id?g.guid(e._natives.type):e.id;t.data.history.push(e._id)}e.start=g.util.toSeconds(e.start,t.options.framerate);e.end=g.util.toSeconds(e.end,t.options.framerate);var n=t.data.trackEvents.byStart,a=t.data.trackEvents.byEnd,i,r,s;for(i=n.length-1;i>=0;i--){if(e.start>=n[i].start){n.splice(i+1,0,e);break}}for(r=a.length-1;r>=0;r--){if(e.end>a[r].end){a.splice(r+1,0,e);break}}if(e._natives&&(!!g.registryByName[e._natives.type]||!!t[e._natives.type])){s=t.media.currentTime;if(e.end>s&&e.start<=s&&t.data.disabled.indexOf(e._natives.type)===-1){e._running=true;e._natives.start.call(t,null,e);if(t.options.frameAnimation&&e._natives.frame){t.data.trackEvents.animating.push(e);e._natives.frame.call(t,null,e,s)}}}if(i<=t.data.trackEvents.startIndex&&e.start<=t.data.trackEvents.previousUpdateTime){t.data.trackEvents.startIndex++}if(r<=t.data.trackEvents.endIndex&&e.end<t.data.trackEvents.previousUpdateTime){t.data.trackEvents.endIndex++}this.timeUpdate(t,null,true);if(e._id){g.addTrackEvent.ref(t,e)}};g.addTrackEvent.ref=function(t,e){t.data.trackRefs[e._id]=e;return t};g.removeTrackEvent=function(t,e){var n=t.data.history.length,a=0,i=[],r=[],s=[],o=[];g.forEach(t.data.trackEvents.byStart,function(n,s,o){if(!n._id){i.push(t.data.trackEvents.byStart[s]);r.push(t.data.trackEvents.byEnd[s])}if(n._id){if(n._id!==e){i.push(t.data.trackEvents.byStart[s]);r.push(t.data.trackEvents.byEnd[s])}if(n._id===e){a=s;n._natives._teardown&&n._natives._teardown.call(t,n)}}});if(t.data.trackEvents.animating.length){g.forEach(t.data.trackEvents.animating,function(n,a,i){if(!n._id){s.push(t.data.trackEvents.animating[a])}if(n._id){if(n._id!==e){s.push(t.data.trackEvents.animating[a])}}})}if(a<=t.data.trackEvents.startIndex){t.data.trackEvents.startIndex--}if(a<=t.data.trackEvents.endIndex){t.data.trackEvents.endIndex--}t.data.trackEvents.byStart=i;t.data.trackEvents.byEnd=r;t.data.trackEvents.animating=s;for(var d=0;d<n;d++){if(t.data.history[d]!==e){o.push(t.data.history[d])}}t.data.history=o;g.removeTrackEvent.ref(t,e)};g.removeTrackEvent.ref=function(t,e){delete t.data.trackRefs[e];return t};g.getTrackEvents=function(t){var e=[],n=t.data.trackEvents.byStart,a=n.length,i=0,r;for(;i<a;i++){r=n[i];if(r._id){e.push(r)}}return e};g.getTrackEvents.ref=function(t){return t.data.trackRefs};g.getTrackEvent=function(t,e){return t.data.trackRefs[e]};g.getTrackEvent.ref=function(t,e){return t.data.trackRefs[e]};g.getLastTrackEventId=function(t){return t.data.history[t.data.history.length-1]};g.timeUpdate=function(t,e){var n=t.media.currentTime,a=t.data.trackEvents.previousUpdateTime,i=t.data.trackEvents,r=i.animating,s=i.endIndex,o=i.startIndex,d=0,u=g.registryByName,c,f,l,p,v;if(a<=n){while(i.byEnd[s]&&i.byEnd[s].end<=n){c=i.byEnd[s];p=c._natives;v=p&&p.type;if(!p||!!u[v]||!!t[v]){if(c._running===true){c._running=false;p.end.call(t,e,c)}s++}else{g.removeTrackEvent(t,c._id);return}}while(i.byStart[o]&&i.byStart[o].start<=n){f=i.byStart[o];p=f._natives;v=p&&p.type;if(!p||!!u[v]||!!t[v]){if(f.end>n&&f._running===false&&t.data.disabled.indexOf(v)===-1){f._running=true;p.start.call(t,e,f);if(t.options.frameAnimation&&f&&f._running&&f._natives.frame){r.push(f)}}o++}else{g.removeTrackEvent(t,f._id);return}}if(t.options.frameAnimation){while(d<r.length){l=r[d];if(!l._running){r.splice(d,1)}else{l._natives.frame.call(t,e,l,n);d++}}}}else if(a>n){while(i.byStart[o]&&i.byStart[o].start>n){f=i.byStart[o];p=f._natives;v=p&&p.type;if(!p||!!u[v]||!!t[v]){if(f._running===true){f._running=false;p.end.call(t,e,f)}o--}else{g.removeTrackEvent(t,f._id);return}}while(i.byEnd[s]&&i.byEnd[s].end>n){c=i.byEnd[s];p=c._natives;v=p&&p.type;if(!p||!!u[v]||!!t[v]){if(c.start<=n&&c._running===false&&t.data.disabled.indexOf(v)===-1){c._running=true;p.start.call(t,e,c);if(t.options.frameAnimation&&c&&c._running&&c._natives.frame){r.push(c)}}s--}else{g.removeTrackEvent(t,c._id);return}}if(t.options.frameAnimation){while(d<r.length){l=r[d];if(!l._running){r.splice(d,1)}else{l._natives.frame.call(t,e,l,n);d++}}}}i.endIndex=s;i.startIndex=o;i.previousUpdateTime=n};g.extend(g.p,{getTrackEvents:function(){return g.getTrackEvents.call(null,this)},getTrackEvent:function(t){return g.getTrackEvent.call(null,this,t)},getLastTrackEventId:function(){return g.getLastTrackEventId.call(null,this)},removeTrackEvent:function(t){g.removeTrackEvent.call(null,this,t);return this},removePlugin:function(t){g.removePlugin.call(null,this,t);return this},timeUpdate:function(t){g.timeUpdate.call(null,this,t);return this},destroy:function(){g.destroy.call(null,this);return this}});g.manifest={};g.registry=[];g.registryByName={};g.plugin=function(t,e,n){if(g.protect.natives.indexOf(t.toLowerCase())>=0){g.error("'"+t+"' is a protected function name");return}var a=["start","end"],i={},r,o=typeof e==="function",d=["_setup","_teardown","start","end","frame"];var u=function(t,e){t=t||g.nop;e=e||g.nop;return function(){t.apply(this,arguments);e.apply(this,arguments)}};g.manifest[t]=n=n||e.manifest||{};d.forEach(function(n){e[n]=E(e[n]||g.nop,t)});var c=function(e,i){if(!i){return this}var r=i._natives={},o="",c,f,l,p;g.extend(r,e);i._natives.type=t;i._running=false;r.start=r.start||r["in"];r.end=r.end||r["out"];r._teardown=u(function(){var t=s.call(arguments);t.unshift(null);t[1]._running&&r.end.apply(this,t)},r._teardown);c=this.options.defaults&&this.options.defaults[i._natives&&i._natives.type];i.compose=i.compose&&i.compose.split(" ")||[];i.effect=i.effect&&i.effect.split(" ")||[];i.compose=i.compose.concat(i.effect);i.compose.forEach(function(t){o=g.compositions[t]||{};d.forEach(function(t){r[t]=u(r[t],o[t])})});i._natives.manifest=n;if(!("start"in i)){i.start=i["in"]||0}if(!("end"in i)){i.end=i["out"]||this.duration()||Number.MAX_VALUE}p=c?g.extend({},c,i):i;if(!p.target){l="options"in n&&n.options;p.target=l&&"target"in l&&l.target}i._natives._setup&&i._natives._setup.call(this,p);g.addTrackEvent(this,g.extend(p,i));g.forEach(e,function(t,e){if(e!=="type"){if(a.indexOf(e)===-1){this.listen(e,t)}}},this);return this};i[t]=function(t){return c.call(this,o?e.call(this,t):e,t)};g.extend(g.p,i);var f={fn:i[t],definition:e,base:e,parents:[],name:t};g.registry.push(g.extend(i,f,{type:t}));g.registryByName[t]=f;return i};g.plugin.errors=[];function E(t,e){return function(){if(g.plugin.debug){return t.apply(this,arguments)}try{return t.apply(this,arguments)}catch(n){g.plugin.errors.push({plugin:e,thrown:n,source:t.toString()});this.trigger("error",g.plugin.errors)}}}g.plugin.debug=false;g.removePlugin=function(t,e){if(!e){e=t;t=g.p;if(g.protect.natives.indexOf(e.toLowerCase())>=0){g.error("'"+e+"' is a protected function name");return}var n=g.registry.length,a;for(a=0;a<n;a++){if(g.registry[a].name===e){g.registry.splice(a,1);delete g.registryByName[e];delete g.manifest[e];delete t[e];return}}}var i=t.data.trackEvents.byStart,r=t.data.trackEvents.byEnd,s=t.data.trackEvents.animating,o,d;for(o=0,d=i.length;o<d;o++){if(i[o]&&i[o]._natives&&i[o]._natives.type===e&&r[o]&&r[o]._natives&&r[o]._natives.type===e){i[o]._natives._teardown&&i[o]._natives._teardown.call(t,i[o]);i.splice(o,1);r.splice(o,1);o--;d--;if(t.data.trackEvents.startIndex<=o){t.data.trackEvents.startIndex--;t.data.trackEvents.endIndex--}}}for(o=0,d=s.length;o<d;o++){if(s[o]&&s[o]._natives&&s[o]._natives.type===e){s.splice(o,1);o--;d--}}};g.compositions={};g.compose=function(t,e,n){g.manifest[t]=n=n||e.manifest||{};g.compositions[t]=e};g.plugin.effect=g.effect=g.compose;g.parsers={};g.parser=function(t,e,n){if(g.protect.natives.indexOf(t.toLowerCase())>=0){g.error("'"+t+"' is a protected function name");return}if(typeof e==="function"&&!n){n=e;e=""}if(typeof n!=="function"||typeof e!=="string"){return}var a=g.events.all,i,r={};i=function(t,a){if(!t){return this}var i=this;g.xhr({url:t,dataType:e,success:function(t){var e=n(t),r,s,d,u=0;r=e.data||[];s=r.length;d=null;if(!s){return}for(;u<s;u++){d=r[u];for(var c in d){if(o.call(d,c)&&!!i[c]){i[c](d[c])}}}if(a){a()}}});return this};r[t]=i;g.extend(g.p,r);return r};g.player=function(t,n){n=n||{};var a=function(t,a,i){i=i||{};var r=new Date/1e3,s=r,o=0,d=1,u=false,f={},l=e.getElementById(c.exec(t)&&c.exec(t)[2])||e.getElementById(t)||t,p={},v,h;for(var m in l){if(typeof l[m]==="object"){p[m]=l[m]}else if(typeof l[m]==="function"){p[m]=function(t){if("length"in l[t]&&!l[t].call){return l[t]}else{return function(){return l[t].apply(l,arguments)}}}(m)}else{g.player.defineProperty(p,m,{get:function(t){return function(){return l[t]}}(m),set:g.nop,configurable:true})}}var y=function(){r=new Date/1e3;if(!p.paused){p.currentTime=p.currentTime+(r-s);p.dispatchEvent("timeupdate");v=setTimeout(y,10)}s=r};p.play=function(){this.paused=false;if(p.readyState>=4){s=new Date/1e3;p.dispatchEvent("play");y()}};p.pause=function(){this.paused=true;p.dispatchEvent("pause")};g.player.defineProperty(p,"currentTime",{get:function(){return o},set:function(t){o=+t;p.dispatchEvent("timeupdate");return o},configurable:true});g.player.defineProperty(p,"volume",{get:function(){return d},set:function(t){d=+t;p.dispatchEvent("volumechange");return d},configurable:true});g.player.defineProperty(p,"muted",{get:function(){return u},set:function(t){u=+t;p.dispatchEvent("volumechange");return u},configurable:true});p.addEventListener=function(t,e){if(!f[t]){f[t]=[]}f[t].push(e);return e};p.dispatchEvent=function(t){var n,a=this,i,r=t.type;if(!r){r=t;i=g.events.getInterface(r);if(i){n=e.createEvent(i);n.initEvent(r,true,true,window,1)}}g.forEach(f[r],function(t){t.call(a,n,a)})};p.src=a||"";p.readyState=0;p.duration=0;p.paused=true;p.ended=0;if(n._setup){n._setup.call(p,i)}else{p.readyState=4;p.dispatchEvent("load");p.dispatchEvent("loadeddata")}p.addEventListener("load",function(){p.currentTime=o;p.volume=d;p.muted=u});p.addEventListener("loadeddata",function(){!p.paused&&p.play()});h=new g.p.init(p,i);return h};g[t]=g[t]||a};g.player.defineProperty=Object.defineProperty||function(t,e,n){t.__defineGetter__(e,n.get||g.nop);t.__defineSetter__(e,n.set||g.nop)};var b=/\?/,w={url:"",data:"",dataType:"",success:g.nop,type:"GET",async:true,xhr:function(){return new t.XMLHttpRequest}};g.xhr=function(t){t.dataType=t.dataType&&t.dataType.toLowerCase()||null;if(t.dataType&&(t.dataType==="jsonp"||t.dataType==="script")){g.xhr.getJSONP(t.url,t.success,t.dataType==="script");return}var e=g.extend({},w,t);e.ajax=e.xhr();if(e.ajax){if(e.type==="GET"&&e.data){e.url+=(b.test(e.url)?"&":"?")+e.data;e.data=null}e.ajax.open(e.type,e.url,e.async);e.ajax.send(e.data||null);return g.xhr.httpData(e)}};g.xhr.httpData=function(t){var e,n=null,a,i=null;t.ajax.onreadystatechange=function(){if(t.ajax.readyState===4){try{n=JSON.parse(t.ajax.responseText)}catch(r){}e={xml:t.ajax.responseXML,text:t.ajax.responseText,json:n};if(!e.xml||!e.xml.documentElement){e.xml=null;try{a=new DOMParser;i=a.parseFromString(t.ajax.responseText,"text/xml");if(!i.getElementsByTagName("parsererror").length){e.xml=i}}catch(r){}}if(t.dataType){e=e[t.dataType]}t.success.call(t.ajax,e)}};return e};g.xhr.getJSONP=function(t,n,a){var i=e.head||e.getElementsByTagName("head")[0]||e.documentElement,r=e.createElement("script"),s=t.split("?")[1],o=false,d=[],u,c,f;if(s&&!a){d=s.split("&")}if(d.length){c=d[d.length-1].split("=")}u=d.length?c[1]?c[1]:c[0]:"jsonp";if(!s&&!a){t+="?callback="+u}if(u&&!a){if(!!window[u]){u=g.guid(u)}window[u]=function(t){n&&n(t);o=true};t=t.replace(c.join("="),c[0]+"="+u)}r.onload=function(){if(a){n&&n()}if(o){delete window[u]}i.removeChild(r)};r.src=t;i.insertBefore(r,i.firstChild);return};g.getJSONP=g.xhr.getJSONP;g.getScript=g.xhr.getScript=function(t,e){return g.xhr.getJSONP(t,e,true)};g.util={toSeconds:function(t,e){var n=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,a="Invalid time format",i,r,s,o,d,u;if(typeof t==="number"){return t}if(typeof t==="string"&&!n.test(t)){g.error(a)}i=t.split(":");r=i.length-1;s=i[r];if(s.indexOf(";")>-1){d=s.split(";");u=0;if(e&&typeof e==="number"){u=parseFloat(d[1],10)/e}i[r]=parseInt(d[0],10)+u}o=i[0];return{1:parseFloat(o,10),2:parseInt(o,10)*60+parseFloat(i[1],10),3:parseInt(o,10)*3600+parseInt(i[1],10)*60+parseFloat(i[2],10)}[i.length||1]}};function _(t){var e=typeof t==="string"?t:[t.language,t.region].join("-"),n=e.split("-");return{iso6391:e,language:n[0]||"",region:n[1]||""}}var x=_(t.navigator.userLanguage||t.navigator.language);g.locale={get:function(){return x},set:function(t){x=_(t);g.locale.broadcast();return x},broadcast:function(t){var e=g.instances,n=e.length,a=0,i;t=t||"locale:changed";for(;a<n;a++){i=e[a];if(t in i.data.events){i.trigger(t)}}}};g.p.cue=g.p.exec;function k(){var t,e=[];if(Object.keys){e=Object.keys(g.p)}else{for(t in g.p){if(o.call(g.p,t)){e.push(t)}}}return e.join(",").toLowerCase().split(",")}g.protect={natives:k()};t.Popcorn=g})(window,window.document);(function(t){t.plugin("code",function(e){var n=false;var a=function(){var t=function(t){return function(e,a){var i=function(){n&&e();n&&t(i)};i()}};if(window.webkitRequestAnimationFrame){return t(window.webkitRequestAnimationFrame)}else if(window.mozRequestAnimationFrame){return t(window.mozRequestAnimationFrame)}else{return t(function(t){window.setTimeout(t,16)})}}();if(!e.onStart||typeof e.onStart!=="function"){if(t.plugin.debug){throw new Error("Popcorn Code Plugin Error: onStart must be a function.")}e.onStart=t.nop}if(e.onEnd&&typeof e.onEnd!=="function"){if(t.plugin.debug){throw new Error("Popcorn Code Plugin Error: onEnd  must be a function.")}e.onEnd=undefined}if(e.onFrame&&typeof e.onFrame!=="function"){if(t.plugin.debug){throw new Error("Popcorn Code Plugin Error: onFrame  must be a function.")}e.onFrame=undefined}return{start:function(t,e){e.onStart(e);if(e.onFrame){n=true;a(e.onFrame,e)}},end:function(t,e){if(e.onFrame){n=false}if(e.onEnd){e.onEnd(e)}}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame"},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);function PopcornObj(){var t=$("#intro #learn-more"),e=$("#watch-video"),n=e.find("a"),a=$("#video-close"),i=$("#promos"),r=$("#promo-video-addons"),s=r.find("ul li"),o=$("#promo-video-addons, header, #featured-addons"),d=$("#featured-addons li"),u=$(".translate"),c=false;var f,l,p,v,h,m;var g={ja:{title:"アドオンとは？",intro:"アドオンとは、追加の機能やスタイルで Firefox をカスタマイズ"+"するアプリケーションのことです。例えば、Web サイトの名前をタ"+"イプミスしたり、ページがビジー状態で読み込めないときに、ブラ"+"ウジングをより快適にするためのアドオンがあります。",featured:"注目のアドオン",close:"近いビデオ"},es:{title:"¿Qué son los complementos?",intro:"Los complementos son aplicaciones que te permiten personalizar "+"Firefox con funcionalidad y estilos adicionales. Si te equivocas "+"al escribir el nombre de un sitio web o no puedes leer una página"+"ocupada, hay un complemento para mejorar tu navegación.",featured:"Complementos destacados",close:"Cerrar Vídeo"}};var y=this;this.init=function(){if(n.is(":visible")){a.remove()}if($("#intro").is(":hidden")){e.show()}};this.init();this.start=function(){if(f){f.show();i.addClass("show-video");c.currentTime(0).play()}else{i.addClass("show-video");f=$("<div>",{"class":"promo-video"});l=$("<video>",{controls:"controls",tabindex:0,id:"promo-video",text:"Your browser does not support the video tag"});p=$("<source>",{type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',src:"https://videos-cdn.mozilla.net/addons/fds0fo.mov"});v=$("<source>",{type:'video/webm; codecs="vp8, vorbis"',src:"https://videos-cdn.mozilla.net/addons/vuue2y.webm"});h=$("<source>",{type:'video/ogv; codecs="theora, vorbis"',src:"https://videos-cdn.mozilla.net/addons/b85p03.ogv"});m=$("#video-details");l.append(p,v,h);f.append(l);i.append(f);var t=$("<div>",{id:"preload-personas",css:{display:"none"}}).appendTo("body");r.find("a[data-browsertheme]").each(function(){var e=$.parseJSON($(this).attr("data-browsertheme"));t.append($("<img>",{src:e["headerURL"].replace(/http:\/\//,"https://")}));t.append($("<img>",{src:e["footerURL"].replace(/http:\/\//,"https://")}))});u.each(function(){var t=$(this);t.attr("data-original",t.text())});c=Popcorn("#promo-video");y.showAddon(0,20,24.5);y.showAddon(1,24.5,26.5);y.showAddon(2,26.5,29.5);y.showAddon(3,32);y.showFlash(33.5,34.7);y.showFlash(34.7,36);y.showAddon(4,37);y.showAddon(5,40);y.showFlutter(48,56);y.showAddon(6,53);y.showDrop(54.8,56);y.showAddon(7,57);y.showTrans("ja",59,59.8);y.showTrans("es",59.8,60.8)}$("#sub > section").hide();r.fadeIn();e.click(_pd(function(){$("body, html").animate({scrollTop:0})}));this.setup_close_button();c.play()};this.setup_close_button=function(){t.attr("data-oldtext",t.text());n.attr("data-oldtext",n.text());t.add(n).addClass("close").text("Close Video");a.click(_pd(function(){y.stop()}))};this.stop=function(e){if(c){c.pause()}$("#promo-video").trigger("close");t.text(t.attr("data-oldtext"));n.text(n.attr("data-oldtext"));t.add(n).removeClass("close");$("#sub > section").show();r.hide();if(f){f.hide()}i.removeClass("show-video")};this.code=function(t){if(t["onEnd"]){$("#promo-video").bind("close",t["onEnd"])}c.code(t)};this.showAddon=function(t,e,n){var a=s.eq(t),i=a.find("a");y.code({start:e,end:1e5,onStart:function(){m.hide();a.addClass("show");s.removeClass("last");s.filter(":visible:last").addClass("last")},onEnd:function(){a.removeClass("show");if(s.filter(".show").length==0){m.show()}}});if(i.attr("data-browsertheme")){y.code({start:e,end:n,onStart:function(){dispatchPersonaEvent("PreviewPersona",i[0],false,true)},onEnd:function(){dispatchPersonaEvent("ResetPersona",i[0])}})}};this.showFlash=function(t,e){y.code({start:t,end:e,onStart:function(){o.css("opacity",0).animate({opacity:1})}})};this.showFlutter=function(t,e){y.code({start:t,end:e,onStart:function(){var t=$(window);if(t.scrollTop()+t.height()>$("#featured-addons").position()["top"]+80){d.each(function(){var t=$(this);setTimeout(function(){t.addClass("flutter")},300*Math.random());setTimeout(function(){t.animate({top:400,left:-400},function(){t.removeClass("flutter")})},3e3*Math.random())})}},onEnd:function(){d.css({top:0,left:0}).removeClass("flutter")}})};this.showDrop=function(t,e){y.code({start:t,end:e,onStart:function(){d.removeClass("flutter").css({top:-400,left:0}).animate({top:0})}})};this.showTrans=function(t,e,n){y.code({start:e,end:n,onStart:function(){u.each(function(){var e=$(this);e.text(g[t][e.attr("data-trans")])})},onEnd:function(){u.each(function(){var t=$(this);t.text(t.attr("data-original"))})}})}}$(function(){var t=new PopcornObj;$("#intro #learn-more, #watch-video:visible a").show().addClass("video").click(_pd(function(){if($(this).hasClass("close"))return t.stop();t.start()}));$("#promos").delegate(".vid-button a","click",_pd(function(){t.start()}))});